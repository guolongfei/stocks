<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>历史走势</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/dygraph/2.1.0/dygraph.min.js"></script>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/dygraph/2.1.0/dygraph.min.css"/>
</head>
<body>
<!--<div class="container" style="font-size: 16px;margin-top: 16px">
    <ul class="row  list-inline" style="overflow:hidden;zoom:1;">
        <li th:each="stock:${historyData}">
            <p th:text="'代码:'+${stock.code}+'  日期:'+${stock.date}+'   收盘价:'+${stock.close}"/>
        </li>
    </ul>
</div>-->
<table align="center">
    <tr>
        <td>
            <div style="width: 600px;height: 400px" id="graph1"></div>
        </td>
    </tr>
</table>
<script type="text/javascript">
    /*g1=new Dygraph(document.getElementById("graph1"),
        "../600008.csv"
        ,{})*/
    $.post("/stocks/historyData",
        {
            code: "600006",
            start: "20081002",
            end: "20101205"
        }, function (data, status) {
            if (data == "" || data == undefined) {
                alert("暂无数据");
            }
            g1 = new Dygraph(document.getElementById("graph1"),
                data
                , {})
        })

    function test() {
        $.post("/stocks/historyData",
            {
                code: $('#code').val(),
                start: $('#start').val(),
                end: $('#end').val()
            }, function (data, status) {
                g1.updateOptions({'file': data});
            })
    }
</script>
<div class="form-inline" role="form">
    <input type="text" class="form-control" id="code">
    <input type="text" class="form-control" id="start">
    <input type="text" class="form-control" id="end">
    <button type="submit" class="btn btn-default" onclick="test()">查看</button>
</div>
</body>
</html>